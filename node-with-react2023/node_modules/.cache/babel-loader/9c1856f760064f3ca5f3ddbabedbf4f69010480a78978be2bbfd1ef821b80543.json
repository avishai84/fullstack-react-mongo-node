{"ast":null,"code":"var _jsxFileName = \"/Users/Avishai/Developer/fullstack/node-with-react2023/src/components/AddItem.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddItem = () => {\n  _s();\n  const [item, setItem] = useState(null);\n  const [responseReq, setResponseReq] = useState(null); // response from server\n  const [errorReq, setErrorReq] = useState(null); // response from server\n  const priceRef = useRef(null);\n  const itemRef = useRef(null);\n  const handleItem = e => {\n    var _itemRef$current, _priceRef$current, _itemRef$current2, _priceRef$current2;\n    // check for empty fields\n    if (((_itemRef$current = itemRef.current) === null || _itemRef$current === void 0 ? void 0 : _itemRef$current.value) === '' || ((_priceRef$current = priceRef.current) === null || _priceRef$current === void 0 ? void 0 : _priceRef$current.value) === '') return;\n    e.preventDefault();\n    setItem({\n      item: (_itemRef$current2 = itemRef.current) === null || _itemRef$current2 === void 0 ? void 0 : _itemRef$current2.value,\n      price: parseInt((_priceRef$current2 = priceRef.current) === null || _priceRef$current2 === void 0 ? void 0 : _priceRef$current2.value)\n    });\n    itemRef.current.value = '';\n    priceRef.current.value = '';\n  };\n  useEffect(() => {\n    if (item === null) return;\n    fetch('http://localhost:3002/addItem', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(item)\n    }).then(response => {\n      if (!response.ok) {\n        throw new Error(`Network response was not ok  ${response.statusText}`);\n      }\n      return response.json(); // Parse the JSON data from the response\n    }).then(response => {\n      // Handle the data returned by the server\n      setResponseReq(response);\n    }).catch(error => {\n      console.error('Error: ', error);\n      setErrorReq(error.message);\n    });\n  }, [item]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Item\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: itemRef,\n          placeholder: \"item name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Price\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          ref: priceRef,\n          placeholder: \"price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleItem,\n        children: \" Add Item\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 10\n  }, this);\n};\n_s(AddItem, \"Cj6mW7I/STcU8JxWQAN7Nz3icIg=\");\n_c = AddItem;\nexport default AddItem;\nvar _c;\n$RefreshReg$(_c, \"AddItem\");","map":{"version":3,"names":["React","useEffect","useState","useRef","jsxDEV","_jsxDEV","AddItem","_s","item","setItem","responseReq","setResponseReq","errorReq","setErrorReq","priceRef","itemRef","handleItem","e","_itemRef$current","_priceRef$current","_itemRef$current2","_priceRef$current2","current","value","preventDefault","price","parseInt","fetch","method","headers","body","JSON","stringify","then","response","ok","Error","statusText","json","catch","error","console","message","style","display","children","type","ref","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/Avishai/Developer/fullstack/node-with-react2023/src/components/AddItem.tsx"],"sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\nimport useFetch from '../hooks/useFetch';\n\ntype ItemProps = {\n    item:string;\n    price: number;\n    };\ntype ResponseReqProps = \n{acknowledged: boolean, insertedId: string};\n\nconst AddItem = ():JSX.Element => {\n    const [item, setItem] = useState<ItemProps | null>(null);\n    const [responseReq, setResponseReq] = useState<ResponseReqProps | null>(null); // response from server\n    const [errorReq, setErrorReq] = useState<string | null>(null); // response from server\n    const priceRef = useRef<HTMLInputElement>(null);\n    const itemRef = useRef<HTMLInputElement>(null);\n\n    const handleItem = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n        // check for empty fields\n        if(itemRef.current?.value === '' || priceRef.current?.value === '') return;\n        e.preventDefault(); \n        setItem({item: itemRef.current?.value as string, price: parseInt(priceRef.current?.value as string)});\n        itemRef.current!.value = '';\n        priceRef.current!.value = '';\n    }; \n\n    useEffect(() => {\n        if(item === null) return;\n        fetch('http://localhost:3002/addItem', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(item)\n        })\n        .then((response) => {\n            if (!response.ok) {\n                throw new Error(`Network response was not ok  ${response.statusText}` );\n            }\n            return response.json(); // Parse the JSON data from the response\n        })\n        .then((response) => {\n            // Handle the data returned by the server\n            setResponseReq(response);\n        })\n        .catch((error) => {\n            console.error('Error: ', error);\n            setErrorReq(error.message);\n        });\n    }, [item]);\n\n\n\n  return(<div style={{ display: \"flex\"}}>\n    <div>\n        <label>Item\n            <input type=\"text\" ref={itemRef} placeholder='item name'/>\n        </label>\n        <label>Price\n            <input type=\"number\" ref={priceRef} placeholder='price'/>\n        </label>\n        <button onClick={handleItem}> Add Item</button>\n    </div>\n  </div>);\n};\n\nexport default AddItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}